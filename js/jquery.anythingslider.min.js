(function(a){a.anythingSlider=function(c,b){var d=this;d.$el=a(c);d.el=c;d.currentPage=1;d.timer=null;d.playing=false;d.$el.data("AnythingSlider",d);d.init=function(){d.options=a.extend({},a.anythingSlider.defaults,b);d.$wrapper=d.$el.find("> div").css("overflow","hidden");d.$slider=d.$wrapper.find("> ul");d.$items=d.$slider.find("> li");d.$single=d.$items.filter(":first");if(d.options.buildNavigation){d.buildNavigation()}d.singleWidth=d.$single.outerWidth();d.pages=d.$items.length;d.$items.filter(":first").before(d.$items.filter(":last").clone().addClass("cloned"));d.$items.filter(":last").after(d.$items.filter(":first").clone().addClass("cloned"));d.$items=d.$slider.find("> li");d.buildNextBackButtons();if(d.options.autoPlay){d.playing=!d.options.startStopped;d.buildAutoPlay()}if(d.options.pauseOnHover){d.$el.hover(function(){d.clearTimer()},function(){d.startStop(d.playing)})}if((d.options.hashTags==true&&!d.gotoHash())||d.options.hashTags==false){d.setCurrentPage(1)}};d.gotoPage=function(g,f){if(f!==true){f=false}if(!f){d.startStop(false)}if(typeof(g)=="undefined"||g==null){g=1;d.setCurrentPage(1)}if(g>d.pages+1){g=d.pages}if(g<0){g=1}var e=g<d.currentPage?-1:1,i=Math.abs(d.currentPage-g),h=d.singleWidth*e*i;d.$wrapper.filter(":not(:animated)").animate({scrollLeft:"+="+h},d.options.animationTime,d.options.easing,function(){if(g==0){d.$wrapper.scrollLeft(d.singleWidth*d.pages);g=d.pages}else{if(g>d.pages){d.$wrapper.scrollLeft(d.singleWidth);g=1}}d.setCurrentPage(g)})};d.setCurrentPage=function(f,e){if(d.options.buildNavigation){d.$nav.find(".cur").removeClass("cur");a(d.$navLinks[f-1]).addClass("cur")}if(e!==false){d.$wrapper.scrollLeft(d.singleWidth*f)}d.currentPage=f};d.goForward=function(e){if(e!==true){e=false}d.gotoPage(d.currentPage+1,e)};d.goBack=function(){d.gotoPage(d.currentPage-1)};d.gotoHash=function(){if(/^#?panel-\d+$/.test(window.location.hash)){var f=parseInt(window.location.hash.substr(7));var e=d.$items.filter(":eq("+f+")");if(e.length!=0){d.setCurrentPage(f);return true}}return false};d.buildNavigation=function(){d.$nav=a("<div id='thumbNav'></div>").appendTo(d.$el);d.$items.each(function(g,h){var f=g+1;var j=a("<a href='#'></a>");var e=f;if(d.options.num){e=d.options.num}if(typeof(d.options.navigationFormatter)=="function"){j.html(d.options.navigationFormatter(e,a(this)))}else{j.text(e)}j.click(function(i){d.gotoPage(f);if(d.options.hashTags){d.setHash("panel-"+f)}i.preventDefault()});d.$nav.append(j)});d.$navLinks=d.$nav.find("> a")};d.buildNextBackButtons=function(){var e=a('<a class="arrow forward">›</a>'),f=a('<a class="arrow back">‹</a>');f.click(function(g){d.goBack();g.preventDefault()});e.click(function(g){d.goForward();g.preventDefault()});d.$wrapper.after(f).after(e)};d.buildAutoPlay=function(){d.$startStop=a("<a href='#' id='start-stop'></a>").html(d.playing?d.options.stopText:d.options.startText);d.$el.append(d.$startStop);d.$startStop.click(function(f){d.startStop(!d.playing);f.preventDefault()});d.startStop(d.playing)};d.startStop=function(e){if(e!==true){e=false}d.playing=e;if(d.options.autoPlay){d.$startStop.toggleClass("playing",e).html(e?d.options.stopText:d.options.startText)}if(e){if(d.options.delay==false){f()}else{d.timer=window.setInterval(function(){d.goForward(true)},d.options.delay)}}else{d.clearTimer()}function f(){var g=d.$items.eq(d.currentPage).attr("rel");d.clearTimer();d.timer=window.setTimeout(function(){d.goForward(true);f()},g)}};d.clearTimer=function(){if(d.timer){if(d.options.delay==false){window.clearTimeout(d.timer)}else{window.clearInterval(d.timer)}}};d.setHash=function(e){if(typeof window.location.hash!=="undefined"){if(window.location.hash!==e){window.location.hash=e}}else{if(location.hash!==e){location.hash=e}}return e};d.init()};a.anythingSlider.defaults={easing:"swing",autoPlay:true,startStopped:false,delay:3000,animationTime:600,hashTags:true,buildNavigation:true,pauseOnHover:true,startText:"Start",stopText:"Stop",navigationFormatter:null};a.fn.anythingSlider=function(b){if(typeof(b)=="object"){return this.each(function(c){(new a.anythingSlider(this,b));b.hashTags=false})}else{if(typeof(b)=="number"){return this.each(function(c){var d=a(this).data("AnythingSlider");if(d){d.gotoPage(b)}})}}}})(jQuery);
